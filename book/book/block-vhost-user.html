<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Block VHost User - Firecracker</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="CHARTER.html"><strong aria-hidden="true">2.</strong> Firecracker Charter</a></li><li class="chapter-item expanded "><a href="CODE_OF_CONDUCT.html"><strong aria-hidden="true">3.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="SECURITY.html"><strong aria-hidden="true">4.</strong> Security</a></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">5.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="CONTRIBUTING.html"><strong aria-hidden="true">6.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="dev-machine-setup.html"><strong aria-hidden="true">7.</strong> Development Machine Setup</a></li><li class="chapter-item expanded "><a href="api-change-runbook.html"><strong aria-hidden="true">8.</strong> API Change Runbook</a></li><li class="chapter-item expanded "><a href="RELEASE_POLICY.html"><strong aria-hidden="true">9.</strong> Releases</a></li><li class="chapter-item expanded "><a href="design.html"><strong aria-hidden="true">10.</strong> Design</a></li><li class="chapter-item expanded "><a href="prod-host-setup.html"><strong aria-hidden="true">11.</strong> Production Host Setup</a></li><li class="chapter-item expanded "><a href="network-setup.html"><strong aria-hidden="true">12.</strong> Network Setup</a></li><li class="chapter-item expanded "><a href="kernel-policy.html"><strong aria-hidden="true">13.</strong> Kernel Support Policy</a></li><li class="chapter-item expanded "><a href="SPECIFICATION.html"><strong aria-hidden="true">14.</strong> Specification</a></li><li class="chapter-item expanded "><a href="network-performance.html"><strong aria-hidden="true">15.</strong> Network Performance</a></li><li class="chapter-item expanded "><a href="FAQ.html"><strong aria-hidden="true">16.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="rootfs-and-kernel-setup.html"><strong aria-hidden="true">17.</strong> Creating Custom rootfs and kernel Images</a></li><li class="chapter-item expanded "><a href="ballooning.html"><strong aria-hidden="true">18.</strong> Ballooning</a></li><li class="chapter-item expanded "><a href="devctr-image.html"><strong aria-hidden="true">19.</strong> Development Container</a></li><li class="chapter-item expanded "><a href="device-api.html"><strong aria-hidden="true">20.</strong> Device API</a></li><li class="chapter-item expanded "><a href="entropy.html"><strong aria-hidden="true">21.</strong> Entropy</a></li><li class="chapter-item expanded "><a href="formal-verification.html"><strong aria-hidden="true">22.</strong> Formal Verification</a></li><li class="chapter-item expanded "><a href="initrd.html"><strong aria-hidden="true">23.</strong> initrd</a></li><li class="chapter-item expanded "><a href="jailer.html"><strong aria-hidden="true">24.</strong> Jailer</a></li><li class="chapter-item expanded "><a href="logger.html"><strong aria-hidden="true">25.</strong> Logger</a></li><li class="chapter-item expanded "><a href="metrics.html"><strong aria-hidden="true">26.</strong> Metrics</a></li><li class="chapter-item expanded "><a href="seccomp.html"><strong aria-hidden="true">27.</strong> Seccomp</a></li><li class="chapter-item expanded "><a href="seccompiler.html"><strong aria-hidden="true">28.</strong> Seccompiler</a></li><li class="chapter-item expanded "><a href="tracing.html"><strong aria-hidden="true">29.</strong> Tracing</a></li><li class="chapter-item expanded "><a href="vsock.html"><strong aria-hidden="true">30.</strong> VSock</a></li><li class="chapter-item expanded "><a href="api-requests.html"><strong aria-hidden="true">31.</strong> API Requests</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="actions.html"><strong aria-hidden="true">31.1.</strong> Actons</a></li><li class="chapter-item expanded "><a href="block-caching.html"><strong aria-hidden="true">31.2.</strong> Block Caching</a></li><li class="chapter-item expanded "><a href="block-io-engine.html"><strong aria-hidden="true">31.3.</strong> Block IO Engine</a></li><li class="chapter-item expanded "><a href="block-vhost-user.html" class="active"><strong aria-hidden="true">31.4.</strong> Block VHost User</a></li><li class="chapter-item expanded "><a href="patch-block.html"><strong aria-hidden="true">31.5.</strong> Patch Block</a></li><li class="chapter-item expanded "><a href="patch-network-interface.html"><strong aria-hidden="true">31.6.</strong> Patch Network Interface</a></li></ol></li><li class="chapter-item expanded "><a href="state-serialize.html"><strong aria-hidden="true">32.</strong> State Serialization Benchmarks</a></li><li class="chapter-item expanded "><a href="cpu-templates.html"><strong aria-hidden="true">33.</strong> CPU Templates</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="boot-protocol.html"><strong aria-hidden="true">33.1.</strong> Boot Protocol</a></li><li class="chapter-item expanded "><a href="cpu-template-helper.html"><strong aria-hidden="true">33.2.</strong> CPU Template Helper</a></li><li class="chapter-item expanded "><a href="cpuid-normalization.html"><strong aria-hidden="true">33.3.</strong> CPUID Normalization</a></li></ol></li><li class="chapter-item expanded "><a href="mmds.html"><strong aria-hidden="true">34.</strong> MMDS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mmds-design.html"><strong aria-hidden="true">34.1.</strong> MMDS Design</a></li><li class="chapter-item expanded "><a href="mmds-user-guide.html"><strong aria-hidden="true">34.2.</strong> MMDS User Guide</a></li></ol></li><li class="chapter-item expanded "><a href="snapshotting.html"><strong aria-hidden="true">35.</strong> Snapshotting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="handling-page-faults-on-snapshot-resume.html"><strong aria-hidden="true">35.1.</strong> Handling Page Faults on Snapshot Resume</a></li><li class="chapter-item expanded "><a href="network-for-clones.html"><strong aria-hidden="true">35.2.</strong> Network For Clones</a></li><li class="chapter-item expanded "><a href="random-for-clones.html"><strong aria-hidden="true">35.3.</strong> Random For Clones</a></li><li class="chapter-item expanded "><a href="snapshot-editor.html"><strong aria-hidden="true">35.4.</strong> Snapshot Editor</a></li><li class="chapter-item expanded "><a href="snapshot-support.html"><strong aria-hidden="true">35.5.</strong> Snapshot Support</a></li><li class="chapter-item expanded "><a href="versioning.html"><strong aria-hidden="true">35.6.</strong> Versioning</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Firecracker</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="vhost-user-block-device"><a class="header" href="#vhost-user-block-device">Vhost-user block device</a></h1>
<blockquote>
<p>[!WARNING]
Support is currently in <strong>developer preview</strong>. See
<a href="#developer-preview-status">this section</a> for more info.</p>
</blockquote>
<p>As an alternative to <a href="block-io-engine.html">file-backed block device</a> <code>Sync</code> and
<code>Async</code> engines, Firecracker supports a vhost-user block device.</p>
<p>There is a good introduction of how a vhost-user block device works
in general at <a href="https://archive.fosdem.org/2023/schedule/event/sds_vhost_user_blk">FOSDEM23</a>.</p>
<p><a href="https://qemu-project.gitlab.io/qemu/interop/vhost-user.html">Vhost-user</a>
is a userspace protocol that allows to delegate Virtio queue processing
to another userspace process on the host, as opposed to performing this task
within Firecracker's VMM thread.</p>
<p>In the vhost-user architecture, the VMM acts as a vhost-user frontend and
it is responsible for:</p>
<ul>
<li>connecting to the backend via a Unix domain socket (UDS)</li>
<li>feature negotiation with the backend and the guest</li>
<li>handling device configuration requests from the guest</li>
<li>sharing sufficient information about the guest memory and Virtio queues
with the backend</li>
</ul>
<p>The vhost-user backend receives the information from the frontend and performs
handling of IO requests from the guest.</p>
<p>The UDS socket is only used for control plane purposes
and does not participate in the data plane.</p>
<p>Firecracker only implements a vhost-user frontend. Users are free
to choose from <a href="#backends">existing open source backends</a> or implement their
own.</p>
<h2 id="topology"><a class="header" href="#topology">Topology</a></h2>
<p>Each vhost-user device connects to its own UDS socket. There is no way for
multiple devices to share a single socket, as there is no way to differentiate
messages related to devices at the vhost-user protocol level.</p>
<p>Each device can be served by a separate backend or a single backend can serve
multiple devices.</p>
<h2 id="interactions-with-the-backend"><a class="header" href="#interactions-with-the-backend">Interactions with the backend</a></h2>
<p>There are three points when the vhost-user frontend communicates with
the backend:</p>
<ol>
<li>Device initialisation. When a vhost-user device is created, Firecracker
connects to the corresponding UDS socket and negotiates Virtio and Vhost
features with backend and retrieves device configuration.</li>
<li>Device activation. When the guest driver finishes setting up the device,
Firecracker shares memory tables and Virtio queue information with the backend.
As a part of this, Firecracker shares file descriptors for guest's memory
regions, as well as file descriptors for queue notifications.</li>
<li>Config update. When receving a <a href="./patch-block.html#updating-vhost-user-block-devices-after-boot"><code>PATCH</code> request</a>
on a vhost-user backed drive, Firecracker rerequests the device config
from the backend in order to make the new config available to the guest.</li>
</ol>
<h2 id="advantages"><a class="header" href="#advantages">Advantages</a></h2>
<p>While vhost-user block is considered an optimisation to Firecracker IO, a naive
implementation of the backend is not going to improve performance.</p>
<p>The major advantage of using a vhost-user device is that the backend can
implement custom processing logic. It can use intelligent algorithms to serve
block requests, eg by fetching the block device data over the network or using
sophisticated readahead logic. In such cases, the performance improvement will
be coming from the fact that the custom logic is implemented in the same
process that handles Virtio queues, which reduces the number of required
context switches.</p>
<h2 id="backends"><a class="header" href="#backends">Backends</a></h2>
<p>There are a number of open source implementations of a vhost-user backend
available for reference that can help developing a custom backend:</p>
<ol>
<li><a href="https://github.com/qemu/qemu/tree/master/contrib/vhost-user-blk">Qemu backend</a></li>
<li><a href="https://github.com/cloud-hypervisor/cloud-hypervisor/tree/main/vhost_user_block">Cloud Hypervisor backend</a></li>
<li><a href="https://github.com/google/crosvm/blob/main/devices/src/virtio/vhost/user/device/block.rs">crosvm backend</a></li>
<li><a href="https://github.com/spdk/spdk/blob/master/lib/vhost/vhost_blk.c">SPDK backend</a></li>
</ol>
<h2 id="security-considerations"><a class="header" href="#security-considerations">Security considerations</a></h2>
<h3 id="guest-memory-sharing"><a class="header" href="#guest-memory-sharing">Guest memory sharing</a></h3>
<p>By design, a vhost-user frontend must share file descriptors
of all guest memory regions to the backend. In order to achive that,
guest memory is created as a <a href="https://man7.org/linux/man-pages/man2/memfd_create.2.html">memfd</a>
and mapped as <code>MAP_SHARED</code>.</p>
<h4 id="file-descriptor-in-procfs"><a class="header" href="#file-descriptor-in-procfs">File descriptor in procfs</a></h4>
<p>An open <code>memfd</code> is reflected in <code>procfs</code> as any other open file descriptor:</p>
<pre><code class="language-shell">$ ls -l /proc/{pid}/fd | grep memfd
lrwx------ 1 1234 1234 64 Nov  2 13:39 32 -&gt; /memfd:guest_mem (deleted)
</code></pre>
<p>Any process on the host that has access to this file in <code>procfs</code> will be able
to map the file descriptor and observe runtime behaviour of the guest.</p>
<p>At the moment, Firecracker does not close the <code>memfd</code>, because it must remain open
until all the configured vhost-user devices have been activated and their info
shared with the backends. This kind of tracking is not implemented in Firecracker,
but may be implemented in the future. Meanwhile, users need to make sure that
the access to the Firecracker's <code>procfs</code> tree is restricted to trusted processes
on the host.</p>
<p>On the backend side, it is advised that the backend closes
the guest memory region file descriptors after mapping them into its own
address space.</p>
<h4 id="resource-limit-in-jailer"><a class="header" href="#resource-limit-in-jailer">Resource limit in jailer</a></h4>
<p>The Firecracker <a href="../jailer.html">jailer</a> allows to configure resource limits
for the Firecracker process. Specifically, it allows to set the maximum file
size. Since <code>memfd</code> that is used to back the guest memory is considered a file,
the file size resource limit cannot be less than the biggest guest memory
region. This does not require any special action from a user, but needs to be
taken into consideration.</p>
<h3 id="remote-code-execution-in-the-backend"><a class="header" href="#remote-code-execution-in-the-backend">Remote code execution in the backend</a></h3>
<p>It is recommended to run Firecracker using the <a href="../jailer.html">jailer</a>. Since
the vhost-user backend interacts with the guest via a Virtio queue, there is
a potential for the guest to exercise issues in the backend codebase
to trigger undesired behaviours. Users should consider running their backend
in a jailer or applying other adequate security measures to restrict it.</p>
<p><strong>Note</strong> <a href="../jailer.html">Firecracker jailer</a> is currently only capable
of running Firecracker as the binary. Vhost-user block device users are
expected to use another jailer to run the backend.</p>
<p>It is also recommended to use proactive security measures like running
a Virtio-level fuzzer in the guest during testing to make sure that the backend
correctly handles all possible classes of inputs (including invalid ones)
from the guest.</p>
<h3 id="rate-limiting--cgroups"><a class="header" href="#rate-limiting--cgroups">Rate limiting / cgroups</a></h3>
<p>Virtio block device in Firecracker has a <a href="../design.html#io-storage-networking-and-rate-limiting">rate limiting capability</a>.</p>
<p>In the vhost-user case, Firecracker does not participate in handling requests
from the guest, so rate limiting becomes backend's responsibility.</p>
<p>As an additional indirect measure, users can make use of <code>cgroups</code> settings
(either via Firecracker jailer or independently) in order to restrict host CPU
consumption of the guest, which would transitively limit guest's IO activity.</p>
<h3 id="protection-against-defects-in-the-backend-code"><a class="header" href="#protection-against-defects-in-the-backend-code">Protection against defects in the backend code</a></h3>
<p>Due to potential defects in the backend (eg mislocating Virtio queues or writes
to a wrong location in the guest memory), the guest execution may be affected.
It is advised that customers monitor guest's health periodically.</p>
<p>Additionally, in order to avoid orhpaned Firecracker processes if the backend
crashes, the backend may need to send a signal, such as <code>SIGBUS</code>,
to the Firecracker process for it to exit as well.</p>
<h3 id="backend-timeouts"><a class="header" href="#backend-timeouts">Backend timeouts</a></h3>
<p>In order to correctly handle the case where the Firecracker process exits
before it exchanges all the expected data with the backend, the backend may
need to implement a timeout for how long it waits for Firecracker to connect
and/or to exchange the data via the vhost-user protocol and exit to avoid
resource exhaustion.</p>
<h2 id="snapshot-support"><a class="header" href="#snapshot-support">Snapshot support</a></h2>
<p>At the moment, <a href="../snapshotting">snapshotting</a> is not supported for microVMs
that have vhost-user devices configured. An attempt to take a snapshot of such
a microVM will fail. It is planned to add support for that in the future.</p>
<h2 id="example-configuration"><a class="header" href="#example-configuration">Example configuration</a></h2>
<p>Run a vhost-user backend, eg Qemu backend:</p>
<pre><code class="language-bash">vhost-user-blk --socket-path=${backend_socket} --blk-file=${drive_path}
</code></pre>
<p>Firecracker API request to add a vhost-user block device:</p>
<pre><code class="language-bash">curl --unix-socket ${fc_socket} -i \
     -X PUT &quot;http://localhost/drives/scratch&quot; \
     -H &quot;accept: application/json&quot; \
     -H &quot;Content-Type: application/json&quot; \
     -d &quot;{
             \&quot;drive_id\&quot;: \&quot;scratch\&quot;,
             \&quot;socket\&quot;: \&quot;${backend_socket}\&quot;,
             \&quot;is_root_device\&quot;: false
         }&quot;
</code></pre>
<p><strong>Note</strong> Unlike Virtio block device, there is no way to configure a <code>readonly</code>
vhost-user drive on the Firecracker side. Instead, this configuration belongs
to the backend. Whenever the backend advertises the <code>VIRTIO_BLK_F_RO</code> feature,
Firecracker will accept it, and the device will act as readonly.</p>
<p><strong>Note</strong> Whenever a <code>PUT</code> request is sent to the <code>/drives</code> endpoint for
a vhost-user device with the <code>id</code> that already exists, Firecracker will close
the existing connection to the backend and will open a new one. Users may need
to restart their backend if they do so.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="block-io-engine.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="patch-block.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="block-io-engine.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="patch-block.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
