<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CPU Template Helper - Firecracker</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="CHARTER.html"><strong aria-hidden="true">2.</strong> Firecracker Charter</a></li><li class="chapter-item expanded "><a href="CODE_OF_CONDUCT.html"><strong aria-hidden="true">3.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="SECURITY.html"><strong aria-hidden="true">4.</strong> Security</a></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">5.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="CONTRIBUTING.html"><strong aria-hidden="true">6.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="dev-machine-setup.html"><strong aria-hidden="true">7.</strong> Development Machine Setup</a></li><li class="chapter-item expanded "><a href="api-change-runbook.html"><strong aria-hidden="true">8.</strong> API Change Runbook</a></li><li class="chapter-item expanded "><a href="RELEASE_POLICY.html"><strong aria-hidden="true">9.</strong> Releases</a></li><li class="chapter-item expanded "><a href="design.html"><strong aria-hidden="true">10.</strong> Design</a></li><li class="chapter-item expanded "><a href="prod-host-setup.html"><strong aria-hidden="true">11.</strong> Production Host Setup</a></li><li class="chapter-item expanded "><a href="network-setup.html"><strong aria-hidden="true">12.</strong> Network Setup</a></li><li class="chapter-item expanded "><a href="kernel-policy.html"><strong aria-hidden="true">13.</strong> Kernel Support Policy</a></li><li class="chapter-item expanded "><a href="SPECIFICATION.html"><strong aria-hidden="true">14.</strong> Specification</a></li><li class="chapter-item expanded "><a href="network-performance.html"><strong aria-hidden="true">15.</strong> Network Performance</a></li><li class="chapter-item expanded "><a href="FAQ.html"><strong aria-hidden="true">16.</strong> FAQ</a></li><li class="chapter-item expanded "><a href="rootfs-and-kernel-setup.html"><strong aria-hidden="true">17.</strong> Creating Custom rootfs and kernel Images</a></li><li class="chapter-item expanded "><a href="ballooning.html"><strong aria-hidden="true">18.</strong> Ballooning</a></li><li class="chapter-item expanded "><a href="devctr-image.html"><strong aria-hidden="true">19.</strong> Development Container</a></li><li class="chapter-item expanded "><a href="device-api.html"><strong aria-hidden="true">20.</strong> Device API</a></li><li class="chapter-item expanded "><a href="entropy.html"><strong aria-hidden="true">21.</strong> Entropy</a></li><li class="chapter-item expanded "><a href="formal-verification.html"><strong aria-hidden="true">22.</strong> Formal Verification</a></li><li class="chapter-item expanded "><a href="initrd.html"><strong aria-hidden="true">23.</strong> initrd</a></li><li class="chapter-item expanded "><a href="jailer.html"><strong aria-hidden="true">24.</strong> Jailer</a></li><li class="chapter-item expanded "><a href="logger.html"><strong aria-hidden="true">25.</strong> Logger</a></li><li class="chapter-item expanded "><a href="metrics.html"><strong aria-hidden="true">26.</strong> Metrics</a></li><li class="chapter-item expanded "><a href="seccomp.html"><strong aria-hidden="true">27.</strong> Seccomp</a></li><li class="chapter-item expanded "><a href="seccompiler.html"><strong aria-hidden="true">28.</strong> Seccompiler</a></li><li class="chapter-item expanded "><a href="tracing.html"><strong aria-hidden="true">29.</strong> Tracing</a></li><li class="chapter-item expanded "><a href="vsock.html"><strong aria-hidden="true">30.</strong> VSock</a></li><li class="chapter-item expanded "><a href="api-requests.html"><strong aria-hidden="true">31.</strong> API Requests</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="actions.html"><strong aria-hidden="true">31.1.</strong> Actons</a></li><li class="chapter-item expanded "><a href="block-caching.html"><strong aria-hidden="true">31.2.</strong> Block Caching</a></li><li class="chapter-item expanded "><a href="block-io-engine.html"><strong aria-hidden="true">31.3.</strong> Block IO Engine</a></li><li class="chapter-item expanded "><a href="block-vhost-user.html"><strong aria-hidden="true">31.4.</strong> Block VHost User</a></li><li class="chapter-item expanded "><a href="patch-block.html"><strong aria-hidden="true">31.5.</strong> Patch Block</a></li><li class="chapter-item expanded "><a href="patch-network-interface.html"><strong aria-hidden="true">31.6.</strong> Patch Network Interface</a></li></ol></li><li class="chapter-item expanded "><a href="state-serialize.html"><strong aria-hidden="true">32.</strong> State Serialization Benchmarks</a></li><li class="chapter-item expanded "><a href="cpu-templates.html"><strong aria-hidden="true">33.</strong> CPU Templates</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="boot-protocol.html"><strong aria-hidden="true">33.1.</strong> Boot Protocol</a></li><li class="chapter-item expanded "><a href="cpu-template-helper.html" class="active"><strong aria-hidden="true">33.2.</strong> CPU Template Helper</a></li><li class="chapter-item expanded "><a href="cpuid-normalization.html"><strong aria-hidden="true">33.3.</strong> CPUID Normalization</a></li></ol></li><li class="chapter-item expanded "><a href="mmds.html"><strong aria-hidden="true">34.</strong> MMDS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="mmds-design.html"><strong aria-hidden="true">34.1.</strong> MMDS Design</a></li><li class="chapter-item expanded "><a href="mmds-user-guide.html"><strong aria-hidden="true">34.2.</strong> MMDS User Guide</a></li></ol></li><li class="chapter-item expanded "><a href="snapshotting.html"><strong aria-hidden="true">35.</strong> Snapshotting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="handling-page-faults-on-snapshot-resume.html"><strong aria-hidden="true">35.1.</strong> Handling Page Faults on Snapshot Resume</a></li><li class="chapter-item expanded "><a href="network-for-clones.html"><strong aria-hidden="true">35.2.</strong> Network For Clones</a></li><li class="chapter-item expanded "><a href="random-for-clones.html"><strong aria-hidden="true">35.3.</strong> Random For Clones</a></li><li class="chapter-item expanded "><a href="snapshot-editor.html"><strong aria-hidden="true">35.4.</strong> Snapshot Editor</a></li><li class="chapter-item expanded "><a href="snapshot-support.html"><strong aria-hidden="true">35.5.</strong> Snapshot Support</a></li><li class="chapter-item expanded "><a href="versioning.html"><strong aria-hidden="true">35.6.</strong> Versioning</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Firecracker</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cpu-template-helper-tool"><a class="header" href="#cpu-template-helper-tool">CPU template helper tool</a></h1>
<p>The <code>cpu-template-helper</code> tool is a program designed to assist users with
creating and managing their custom CPU templates.</p>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>The <code>cpu-template-helper</code> tool has two sets of commands: template-related
commands and fingerprint-related commands.</p>
<h3 id="template-related-commands"><a class="header" href="#template-related-commands">Template-related commands</a></h3>
<h4 id="dump-command"><a class="header" href="#dump-command">Dump command</a></h4>
<p>This command dumps guest CPU configuration in the custom CPU template JSON
format.</p>
<pre><code>cpu-template-helper template dump --config &lt;firecracker-config&gt; --output &lt;cpu-config&gt;
</code></pre>
<p>Users can utilize this as an entry point of a custom CPU template creation
to comprehend what CPU configuration are exposed to guests.</p>
<p>The guest CPU configuration consists of the following entities:</p>
<ul>
<li>x86_64
<ul>
<li>CPUID</li>
<li>MSRs (Model Specific Registers)</li>
</ul>
</li>
<li>aarch64
<ul>
<li>ARM registers</li>
</ul>
</li>
</ul>
<p>It retrieves the above entities exposed to a guest by applying the same preboot
process as Firecacker and capturing them in the state just before booting a
guest. More details about the preboot process can be found
<a href="boot-protocol.html">here</a> and <a href="cpuid-normalization.html">here</a>.</p>
<blockquote>
<p><strong>Note</strong>
Some MSRs and ARM registers are not included in the output, since they are not
reasonable to modify with CPU templates. The full list of them can be found in
<a href="#appendix">Appendix</a>.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong>
Since the output depends on underlying hardware and software stack (BIOS, CPU,
kernel, Firecracker), it is required to dump guest CPU configuration on each
combination when creating a custom CPU template targetting them all.</p>
</blockquote>
<h4 id="strip-command"><a class="header" href="#strip-command">Strip command</a></h4>
<p>This command strips identical entries from multiple guest CPU configuration
files generated with the dump command.</p>
<pre><code>cpu-template-helper template strip \
    --paths &lt;cpu-config-1&gt; &lt;cpu-config-2&gt; [..&lt;cpu-config-N&gt;] \
    --suffix &lt;suffix&gt;
</code></pre>
<p>One practical use case of the CPU template feature is to provide a consistent
CPU feature set to guests running on multiple CPU models. When creating a custom
CPU template for this purpose, it is efficient to focus on the differences
in guest CPU configurations across those CPU models. Given that a dumped guest
CPU configuration typically amounts to approximately 1,000 lines, this command
considerably narrows down the scope to consider.</p>
<h4 id="verify-command"><a class="header" href="#verify-command">Verify command</a></h4>
<p>This command verifies that the given custom CPU template is applied correctly.</p>
<pre><code>cpu-template-helper template verify \
    --config &lt;firecracker-config&gt;
</code></pre>
<p>Firecracker modifies the guest CPU configuration after the CPU template is
applied. Occasionally, due to hardware and/or software limitations, KVM might
not set the given configuration. Since Firecracker does not check them at
runtime, it is required to ensure that these situations don't happen with their
custom CPU templates before deploying it.</p>
<p>The command uses the same configuration file as Firecracker and the path to the
custom CPU template file should be specified in the &quot;cpu-config&quot; field.</p>
<blockquote>
<p><strong>Note</strong>
This command does not ensure that the contents of the template are sensible.
Thus, users need to make sure that the template does not have any inconsistent
entries and does not crash guests.</p>
</blockquote>
<h3 id="fingerprint-related-commands"><a class="header" href="#fingerprint-related-commands">Fingerprint-related commands</a></h3>
<h4 id="dump-command-1"><a class="header" href="#dump-command-1">Dump command</a></h4>
<p>This command not only dumps the guest CPU configuration, but also host
information that could affect the validity of custom CPU templates.</p>
<pre><code>cpu-template-helper fingerprint dump \
    --config &lt;firecracker-config&gt; \
    --output &lt;output-path&gt;
</code></pre>
<p>Keeping the underlying hardware and software stack updated is essential for
maintaining security and leveraging new technologies. On the other hand, since
the guest CPU configuration can vary depending on the infrastructure, updating
it could lead to a situation where a custom CPU template loses its validity.
In addition, even if values of the guest CPU configuration don't change, its
internal behavior or semantics could still change. For instance, a kernel
version update may introduce changes to KVM emulation and a microcode update may
alter the behavior of CPU instructions.</p>
<p>To ensure awareness of these changes, it is strongly recommended to store the
fingerprint file at the time of creating a custom CPU template and to
continuously compare it with the current one.</p>
<h4 id="compare-command"><a class="header" href="#compare-command">Compare command</a></h4>
<p>This command compares two fingerprint files: one was taken at the time of custom
CPU template creation and the other is taken currently.</p>
<pre><code>cpu-template-helper fingerprint compare \
    --prev &lt;prev-fingerprint&gt; \
    --curr &lt;curr-fingerprint&gt; \
    --filters &lt;field-1&gt; [..&lt;field-N&gt;]
</code></pre>
<p>By continously comparing fingerprint files, users can ensure they are aware of
any changes that could require revising the custom CPU template. However, it is
worth noting that not all of these changes necessarily require a revision, and
some changes could be inconsequential to the custom CPU template depending on
its use case. To provide users with flexibility in comparing fingerprint files
based on situations or use cases, the <code>--filters</code> option allows users to select
which fields to compare.</p>
<p>As examples of when to compare fingerprint files:</p>
<ul>
<li>When bumping the Firecracker version up</li>
<li>When bumping the kernel version up</li>
<li>When applying a microcode update (or launching a new host (e.g. AWS EC2 metal
instance))</li>
</ul>
<h2 id="sample-scenario"><a class="header" href="#sample-scenario">Sample scenario</a></h2>
<p>This section gives steps of creating and managing a custom CPU template in a
sample scenario where the template is designed to provide a consistent set of
CPU features to a heterogeneous fleet consisting of multiple CPU models.</p>
<h3 id="custom-cpu-template-creation"><a class="header" href="#custom-cpu-template-creation">Custom CPU template creation</a></h3>
<ol>
<li>Run the <code>cpu-template-helper template dump</code> command on each CPU model to
retrieve guest CPU configuration.</li>
<li>Run the <code>cpu-template-helper template strip</code> command to remove identical
entries across the dumped guest CPU configuration files.</li>
<li>Examine the differences of guest CPU configuration in details, determine
which CPU features should be presented to guests and draft a custom CPU
template.</li>
<li>Run the <code>cpu-template-helper template verify</code> command to check the created
custom CPU template is applied correctly.</li>
<li>Conduct thorough testing of the template as needed to ensure that it does
not contain any inconsistent entries and does not lead to guest crashes.</li>
</ol>
<h3 id="custom-cpu-template-management"><a class="header" href="#custom-cpu-template-management">Custom CPU template management</a></h3>
<ol>
<li>Run the <code>cpu-template-helper fingerprint dump</code> command on each CPU model
at the same time when creating a custom CPU template.</li>
<li>Store the dumped fingerprint files together with the custom CPU template.</li>
<li>Run the <code>cpu-template-helper fingerprint dump</code> command to ensure the
template's validity whenever you expect changes to the underlying hardware
and software stack.</li>
<li>Run the <code>cpu-template-helper fingerprint compare</code> command to identify
changes of the underlying environment introduced after creating the template.</li>
<li>(if changes are detected) Review the identified changes, make necessary
revisions to the CPU template, and replace the fingerprint file with the new
one.</li>
</ol>
<blockquote>
<p><strong>Note</strong>
It is recommended to review the update process of the underlying stack on
your infrastructure. This can help identify points that may require the above
validation check.</p>
</blockquote>
<h2 id="appendix"><a class="header" href="#appendix">Appendix</a></h2>
<h3 id="msrs-excluded-from-guest-cpu-configuration-dump"><a class="header" href="#msrs-excluded-from-guest-cpu-configuration-dump">MSRs excluded from guest CPU configuration dump</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Register name</th><th>Index</th></tr></thead><tbody>
<tr><td>MSR_IA32_TSC</td><td>0x00000010</td></tr>
<tr><td>MSR_ARCH_PERFMON_PERFCTRn</td><td>0x000000c1 - 0x000000d2</td></tr>
<tr><td>MSR_ARCH_PERFMON_EVENTSELn</td><td>0x00000186 - 0x00000197</td></tr>
<tr><td>MSR_ARCH_PERFMON_FIXED_CTRn</td><td>0x00000309 - 0x0000030b</td></tr>
<tr><td>MSR_CORE_PERF_FIXED_CTR_CTRL</td><td>0x0000038d</td></tr>
<tr><td>MSR_CORE_PERF_GLOBAL_STATUS</td><td>0x0000038e</td></tr>
<tr><td>MSR_CORE_PERF_GLOBAL_CTRL</td><td>0x0000038f</td></tr>
<tr><td>MSR_CORE_PERF_GLOBAL_OVF_CTRL</td><td>0x00000390</td></tr>
<tr><td>MSR_K7_EVNTSELn</td><td>0xc0010000 - 0xc0010003</td></tr>
<tr><td>MSR_K7_PERFCTR0</td><td>0xc0010004 - 0xc0010007</td></tr>
<tr><td>MSR_F15H_PERF_CTLn + MSR_F15H_PERF_CTRn</td><td>0xc0010200 - 0xc001020c</td></tr>
<tr><td>MSR_IA32_VMX_BASIC</td><td>0x00000480</td></tr>
<tr><td>MSR_IA32_VMX_PINBASED_CTLS</td><td>0x00000481</td></tr>
<tr><td>MSR_IA32_VMX_PROCBASED_CTLS</td><td>0x00000482</td></tr>
<tr><td>MSR_IA32_VMX_EXIT_CTLS</td><td>0x00000483</td></tr>
<tr><td>MSR_IA32_VMX_ENTRY_CTLS</td><td>0x00000484</td></tr>
<tr><td>MSR_IA32_VMX_MISC</td><td>0x00000485</td></tr>
<tr><td>MSR_IA32_VMX_CR0_FIXEDn</td><td>0x00000486 - 0x00000487</td></tr>
<tr><td>MSR_IA32_VMX_CR4_FIXEDn</td><td>0x00000488 - 0x00000489</td></tr>
<tr><td>MSR_IA32_VMX_VMCS_ENUM</td><td>0x0000048a</td></tr>
<tr><td>MSR_IA32_VMX_PROCBASED_CTLS2</td><td>0x0000048b</td></tr>
<tr><td>MSR_IA32_VMX_EPT_VPID_CAP</td><td>0x0000048c</td></tr>
<tr><td>MSR_IA32_VMX_TRUE_PINBASED_CTLS</td><td>0x0000048d</td></tr>
<tr><td>MSR_IA32_VMX_TRUE_PROCBASED_CTLS</td><td>0x0000048e</td></tr>
<tr><td>MSR_IA32_VMX_TRUE_EXIT_CTLS</td><td>0x0000048f</td></tr>
<tr><td>MSR_IA32_VMX_TRUE_ENTRY_CTLS</td><td>0x00000490</td></tr>
<tr><td>MSR_IA32_VMX_VMFUNC</td><td>0x00000491</td></tr>
<tr><td>MSR_IA32_MCG_STATUS</td><td>0x0000017a</td></tr>
<tr><td>MSR_IA32_MCG_CTL</td><td>0x0000017b</td></tr>
<tr><td>MSR_IA32_MCG_EXT_CTL</td><td>0x000004d0</td></tr>
<tr><td>HV_X64_MSR_GUEST_OS_ID</td><td>0x40000000</td></tr>
<tr><td>HV_X64_MSR_HYPERCALL</td><td>0x40000001</td></tr>
<tr><td>HV_X64_MSR_VP_INDEX</td><td>0x40000002</td></tr>
<tr><td>HV_X64_MSR_RESET</td><td>0x40000003</td></tr>
<tr><td>HV_X64_MSR_VP_RUNTIME</td><td>0x40000010</td></tr>
<tr><td>HV_X64_MSR_VP_ASSIST_PAGE</td><td>0x40000073</td></tr>
<tr><td>HV_X64_MSR_SCONTROL</td><td>0x40000080</td></tr>
<tr><td>HV_X64_MSR_STIMER0_CONFIG</td><td>0x400000b0</td></tr>
<tr><td>HV_X64_MSR_CRASH_Pn</td><td>0x40000100 - 0x40000104</td></tr>
<tr><td>HV_X64_MSR_CRASH_CTL</td><td>0x40000105</td></tr>
<tr><td>HV_X64_MSR_REENLIGHTENMENT_CONTROL</td><td>0x40000106</td></tr>
<tr><td>HV_X64_MSR_TSC_EMULATION_CONTROL</td><td>0x40000107</td></tr>
<tr><td>HV_X64_MSR_TSC_EMULATION_STATUS</td><td>0x40000108</td></tr>
<tr><td>HV_X64_MSR_SYNDBG_CONTROL</td><td>0x400000f1</td></tr>
<tr><td>HV_X64_MSR_SYNDBG_STATUS</td><td>0x400000f2</td></tr>
<tr><td>HV_X64_MSR_SYNDBG_SEND_BUFFER</td><td>0x400000f3</td></tr>
<tr><td>HV_X64_MSR_SYNDBG_RECV_BUFFER</td><td>0x400000f4</td></tr>
<tr><td>HV_X64_MSR_SYNDBG_PENDING_BUFFER</td><td>0x400000f5</td></tr>
<tr><td>HV_X64_MSR_SYNDBG_OPTIONS</td><td>0x400000ff</td></tr>
</tbody></table>
</div>
<h3 id="arm-registers-excluded-from-guest-cpu-configuration-dump"><a class="header" href="#arm-registers-excluded-from-guest-cpu-configuration-dump">ARM registers excluded from guest CPU configuration dump</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Register name</th><th>ID</th></tr></thead><tbody>
<tr><td>Program Counter</td><td>0x6030000000100040</td></tr>
<tr><td>KVM_REG_ARM_TIMER_CNT</td><td>0x603000000013df1a</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="boot-protocol.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="cpuid-normalization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="boot-protocol.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="cpuid-normalization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
